<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>React类组件 | TimYang</title><meta name="author" content="Tim Yang"><meta name="copyright" content="Tim Yang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="React的类组件细节">
<meta property="og:type" content="article">
<meta property="og:title" content="React类组件">
<meta property="og:url" content="https://yangtimfeng.github.io/2022/12/04/%E4%BB%A3%E7%A0%81%E5%9D%97%E6%BC%94%E7%A4%BA/%E6%BC%94%E7%A4%BA/index.html">
<meta property="og:site_name" content="TimYang">
<meta property="og:description" content="React的类组件细节">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.inovex.de/wp-content/uploads/2022/01/one-year-of-react-native-1500x880.png">
<meta property="article:published_time" content="2022-12-03T19:27:00.000Z">
<meta property="article:modified_time" content="2022-12-04T09:32:04.090Z">
<meta property="article:author" content="Tim Yang">
<meta property="article:tag" content="博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.inovex.de/wp-content/uploads/2022/01/one-year-of-react-native-1500x880.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://yangtimfeng.github.io/2022/12/04/%E4%BB%A3%E7%A0%81%E5%9D%97%E6%BC%94%E7%A4%BA/%E6%BC%94%E7%A4%BA/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'React类组件',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-04 17:32:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s3.uuu.ovh/imgs/2022/12/04/3dd3d15435d83cc3.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 档案</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://www.inovex.de/wp-content/uploads/2022/01/one-year-of-react-native-1500x880.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">TimYang</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 档案</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">React类组件</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-03T19:27:00.000Z" title="发表于 2022-12-04 03:27:00">2022-12-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-04T09:32:04.090Z" title="更新于 2022-12-04 17:32:04">2022-12-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="React类组件"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="React-基础-组件-类组件"><a href="#React-基础-组件-类组件" class="headerlink" title="React 基础-组件-类组件"></a>React 基础-组件-类组件</h1><h2 id="1-组件概述"><a href="#1-组件概述" class="headerlink" title="1.组件概述"></a>1.组件概述</h2><blockquote>
<p>目标：了解 React 组件的作用和创建组件的方式</p>
</blockquote>
<hr>
<ul>
<li><input disabled="" type="checkbox"> 什么是组件</li>
<li><input disabled="" type="checkbox"> 组件的设计思想</li>
</ul>
<hr>
<h3 id="1-what-is-组件啊？"><a href="#1-what-is-组件啊？" class="headerlink" title="1.what is 组件啊？"></a>1.what is 组件啊？</h3><p>在掐断开发中组件就是用户界面当中一块独立的区域,在组件内部会包含这块区域中的视图代码,样式代码以及逻辑代码</p>
<p><img src="https://img.abeim.cn/imgs/2022/11/509aac1635b35677.png"></p>
<p>React 是采用组件的方式来构建用户界面,通过将多个组件进行组合形成完成的用户界面,就好比搭乐高一样</p>
<p><img src="https://img.abeim.cn/imgs/2022/11/b728b128ff45e9c6.png"></p>
<h3 id="2-组件设计思想"><a href="#2-组件设计思想" class="headerlink" title="2.组件设计思想"></a>2.组件设计思想</h3><p>组件的核心思想之一就是重复使用用,定义一次就可以在任何地方进行使用</p>
<p>组件可以用来封装用户界面中的重复区块,复用重复区块</p>
<p><img src="https://img.abeim.cn/imgs/2022/11/2ca2fc73b2362d0e.png"></p>
<p>组件的第二个核心思想就是解耦。</p>
<p>在传统的 <code>web</code>页面开发中,一个<code>html</code>文件就是一个页面,就是说当前页面中的所有代码都被写在同一个文件中,这就很容易导致代码的冲突</p>
<p>在组件化开发中,每个组件都有自己的作用域,组件与组件之间的代码不会发生任何冲突 m 从而避免在传统开发的模式中经常出现改了 A，B 却挂了的问题</p>
<hr>
<h2 id="2-创建组件"><a href="#2-创建组件" class="headerlink" title="2.创建组件"></a>2.创建组件</h2><blockquote>
<p>目标: 掌握创建类组件的方式</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import ReactDOM from &quot;react-dom/client&quot;;</span><br><span class="line">import &#123;Component&#125; from &quot;react&quot;</span><br><span class="line"></span><br><span class="line">//1.组件名称首字母大写</span><br><span class="line">//2.只有继承了 Component类才是React 组件</span><br><span class="line">//3.类中必须是包含render方法用于渲染用户界面, render方法的名字是固定的,渲染用户界面时返回 jsx,不渲染任何界面时返回 null;</span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div&gt;头部组件&lt;/div&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const root = ReactDOM.createRoot(document.getElementById(&quot;root&quot;));</span><br><span class="line">root.render(&lt;App&gt;&lt;/App&gt;)</span><br></pre></td></tr></table></figure>

<h3 id="1-组件单独存放"><a href="#1-组件单独存放" class="headerlink" title="1.组件单独存放"></a>1.组件单独存放</h3><p><strong>在实际的 React 项目开发中,组件作为独立的个体一般都会被放置在单独的文件中方便维护</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//src/App.js</span><br><span class="line">import &#123;Component&#125; from &quot;react&quot;;</span><br><span class="line">//约定：组件文件的名称和组件名称保持一致</span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div&gt;头部组件&lt;/div&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">//导出组件,以便在其他地方导入并使用组件</span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//src/index.js</span><br><span class="line">import ReactDOM from &quot;react-dom/client&quot;;</span><br><span class="line">import App from &quot;./App&quot;;</span><br><span class="line"></span><br><span class="line">const root = ReactDOM.createRoot(document.getElementById(&quot;root&quot;))</span><br><span class="line">root.render(&lt;App&gt;&lt;/App&gt;)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-组件状态"><a href="#3-组件状态" class="headerlink" title="3.组件状态"></a>3.组件状态</h2><h3 id="1-组件状态什么玩意？"><a href="#1-组件状态什么玩意？" class="headerlink" title="1.组件状态什么玩意？"></a>1.组件状态什么玩意？</h3><p>用一个例子来比喻就是说现实生活中的状态指同一个事物有不同形式,比如水,当水达到沸点那么就会变成水蒸气,如果水在零摄氏度以下就会结成冰</p>
<p>在 web 应用中用户界面也是有状态的,比如有一块将要展示用户列表的区域,用户列表数据需要从服务端获取,该区域将会有以下这几种状态</p>
<table>
<thead>
<tr>
<th>状态</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>空闲</td>
<td>在没有发出请求时该区域为空闲状态</td>
</tr>
<tr>
<td>加载中</td>
<td>请求在发出后没有得到响应前该区域为加载中状态</td>
</tr>
<tr>
<td>加载成功</td>
<td>当请求得到响应用户列表渲染成功后该区域为成功状态</td>
</tr>
<tr>
<td>加载失败</td>
<td>当请求未得到正确的响应时该区域为失败状态</td>
</tr>
<tr>
<td>结束</td>
<td>不论请求成功与失败请求都结束了该区域为结束状态</td>
</tr>
</tbody></table>
<p><img src="https://img.abeim.cn/imgs/2022/11/55af4a1ad7f6f99e.gif"></p>
<p>再比如导航链接,它具有默认状态和选中状态.下拉框具有收缩状态和展开状态</p>
<p><img src="https://img.abeim.cn/imgs/2022/11/ba13627704523874.png"></p>
<p>那么如何在程序中表示用户界面的状态呢?在程序中可以通过声明变量进行状态的记录</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//idle:空闲状态</span></span><br><span class="line"><span class="comment">//loading:加载中</span></span><br><span class="line"><span class="comment">//success:加载成功</span></span><br><span class="line"><span class="comment">//error:加载失败</span></span><br><span class="line"><span class="comment">//finish:结束</span></span><br><span class="line"><span class="keyword">let</span> status = <span class="string">&quot;idle&quot;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let navLink = &quot;白色&quot;;</span><br><span class="line">let activeNavLink = &quot;绿色&quot;</span><br></pre></td></tr></table></figure>

<p><code>React</code>应用程序使用组件构建用户界面,所以用户界面的状态需要被声明在组件中,被声明在组件中的状态被叫做组件状态。</p>
<h3 id="2-操作组件状态"><a href="#2-操作组件状态" class="headerlink" title="2.操作组件状态"></a>2.操作组件状态</h3><blockquote>
<p>目标：掌握操作组件状态的方法</p>
</blockquote>
<p>在这类组件中组件状态必须声明在类的 state 属性中,state 属性的名字时固定的,对象类型.</p>
<p>在 render 方法中通过 this 关键获取 state 属性中的状态。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//目标：实现计数器案例,即声明组件状态 count用于存储数值,点击按钮让数值+1</span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  //state 对象用于存储组件状态</span><br><span class="line">  state = &#123;</span><br><span class="line">    //状态count,初始值为 0</span><br><span class="line">    count:0,</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    //render 方法中的this指向组件的实例对象</span><br><span class="line">    //state 属性时类的实例属性</span><br><span class="line">    //所以通过this 是可以获取到state对象的</span><br><span class="line">    return &lt;button&gt;&#123;this.state.count&#125;&lt;/button&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>类组件中的组件状态必须通过类实例对象下的 setState 方法进行修改,只有这样才能触发视图更新.</p>
<p>当前组件实例下并没有 setState 方法,setState 方法是父类 Component 提供的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class App extends Component &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count:0</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">    	&lt;button onClick=&#123;()=&gt; &#123;</span><br><span class="line">          //1.更新状态,接收对象作为参数,改哪一个状态就传递哪一个状态即可.react内部会帮助我们进行状态合并操作</span><br><span class="line">          //2.更新视图</span><br><span class="line">          this.setState(&#123;count:this.state.count + 1&#125;)</span><br><span class="line">        &#125;&#125;&gt;&#123;this.state.count&#125;&lt;/button&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可能 🤔 得点:那就是之前说过事件处理函数中的 this 指向 undefined,为什么此处它又指向了组件实例对象呢？</p>
<p>因为此处事件处理函数是 ➡️ 箭头函数,箭头函数不绑定 this,箭头函数中的 this 指向了箭头函数定义处的 this,由于当前的事件处理函数是在 render 方法中定义的,而 render 方法中的 this 指向了组件实例对象,所以该事件处理函数中的 this 指向了组件实例对象。</p>
<p>⚠️ 的点:在 state 对象存储多个状态的情况下,使用 setState 更新状态时只传递需要更新的状态即可,React 会先接收我们传递给 setState 方法的状态,再使用它和原有状态进行合并,从而产生新状态。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Component&#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">export default class App extends Component &#123;</span><br><span class="line">  constrouct() &#123;</span><br><span class="line">    super()</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      count:0,</span><br><span class="line">      name:&quot;张三&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div&gt;&lt;button onClick=&#123;()=&gt;this.setState(&#123;count:this.state.count + 1&#125;)&#125;&gt;&#123;this.state.count&#125;&lt;/button&gt; &lt;span&gt;&#123;this.state.name&#125;&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-更改事件函数-this-指向"><a href="#3-更改事件函数-this-指向" class="headerlink" title="3.更改事件函数 this 指向"></a>3.更改事件函数 this 指向</h3><blockquote>
<p>目标:掌握 React 中事件处理函数 this 关键字的指向如何更改</p>
</blockquote>
<p><strong>大多数情况下,我们都希望时吧事件处理函数的 this 关键字指向组件实例对象。</strong></p>
<p><em>以下有三种情况可以解决这个问题</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class App extends Component &#123;</span><br><span class="line">  onClickHandler() &#123;</span><br><span class="line">    console.log(this)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    //使用render函数中的this关键字调用真正的事件处理函数,使其内部指向当前组件实例对象</span><br><span class="line">    //小问题:组件状态发生更改后要更新视图,也就是render方法会重新执行,当每次render方法重新执行时 javascript 执行引擎都会创建新的行为匿名箭头函数,都会为元素绑定新的行内匿名箭头函数,性能有一丢丢损失</span><br><span class="line">    return &lt;button onClick=&#123;()=&gt;this.onClickHandler()&#125;&gt;button&lt;/button&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//为什么改写成箭头函数以后可以解决this问题</span><br><span class="line">//简写语法</span><br><span class="line">class Person &#123;</span><br><span class="line">  fn = () =&gt; &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Person &#123;</span><br><span class="line">  constrouct() &#123;</span><br><span class="line">     // 由于箭头函数不绑定 this, 所以 fn 函数在被调用后, 函数内部的 this 实际上用的是 constructor 构建函数中的 this</span><br><span class="line">    // 而构造函数中的 this 指向了组件实例对象, 所以 fn 函数中的 this 就指向了实例对象</span><br><span class="line">    this.fn = () =&gt; &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class App extends Component &#123;</span><br><span class="line">  onClickHandler() &#123;</span><br><span class="line">    console.log(this)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    //通过bind方法将事件处理函数中的this指向组件实例对象,bind方法返回一个新的被更改了this指向的函数作为事件处理函数</span><br><span class="line">    //问题:render 方法每次重新执行都会为元素绑定新的bind方法返回的事件处理函数,性能有一丢丢损失</span><br><span class="line">    return &lt;button onClick=&#123;this.onClickHandler.bind(this)&#125;&gt;&lt;/button&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class App extends Component &#123;</span><br><span class="line">  constrouct() &#123;</span><br><span class="line">    super() &#123;</span><br><span class="line">      // 在构造函数中将事件处理函数更改为组件对象</span><br><span class="line">      // 构造函数中的 this 指向的是组件的实例对象</span><br><span class="line">      // 这样即保证了事件处理函数为原型方法, 又确保了 this 指向的更改只执行一次</span><br><span class="line">      // 所以从性能角度考虑, 这种方式是最为理想的</span><br><span class="line">      // 推荐: ⭐️⭐️⭐️⭐️⭐️</span><br><span class="line">      this.onClickHandler = this.onClickHandler.bind(this);</span><br><span class="line">    &#125;</span><br><span class="line">    onClickHandler() &#123;</span><br><span class="line">      console.log(this)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">      return &lt;button onClickHandler=&#123;this.onClickHandler&#125;&gt;&lt;/button&gt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-状态不可变"><a href="#4-状态不可变" class="headerlink" title="4.状态不可变"></a>4.状态不可变</h3><blockquote>
<p>目标: 理解 React 中状态不可变理念</p>
</blockquote>
<p>在 <code>React</code>中关于状态有一个核心的思想理念就是状态不可变,该理念是需要被时刻严格遵守</p>
<p>状态不可变是指在更新组件状态时不能直接操作现有的状态,而是要基于现有状态值产生新状态值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">state = &#123;</span><br><span class="line">  count:0,</span><br><span class="line">  list:[1,2,3],</span><br><span class="line">  person: &#123;</span><br><span class="line">    name:&quot;张三&quot;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//🙅写法</span><br><span class="line">this.state.count = 200;</span><br><span class="line">this.state.count--</span><br><span class="line">this.state.list.push</span><br><span class="line">this.state.person.name = &quot;王武&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//正确写法</span><br><span class="line">this.setState(&#123;</span><br><span class="line">  //数组的删除写法</span><br><span class="line">  list:[...this.state.list.slice(0,1),&quot;p&quot;,...this.state.list.slice(2)],</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>如何理解 React 状态不可变？</p>
<p>因为 React 在更新真实 DOM 对象之前，要对新旧状态对象 state 进行对比找出要更新的部分，所以当前状态也就是旧状态是不能被直接更改的。</p>
<hr>
<h2 id="4-非受控表单组件"><a href="#4-非受控表单组件" class="headerlink" title="4.非受控表单组件"></a>4.非受控表单组件</h2><blockquote>
<p>目标:掌握非受控表单的使用方式</p>
</blockquote>
<p>在 HTML 中表单控件可以维护自身的状态</p>
<p>用户在表单控件中输入的值就是表单控件要维护的状态,表单控件会实时将状态存储到表单控件对应的<code>DOM</code>对象的 value 属性中</p>
<p>非受控表单组件是指表单组件的状态由自己进行维护</p>
<p>在非受控组件中开发者腰获取表单控件需要先获取表单控件<code>DOM</code>对象,再通过 value 属性去获取表单控件状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Component,createRef&#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  constrouct() &#123;</span><br><span class="line">    super();</span><br><span class="line">    //设置this指向实例对象</span><br><span class="line">    this.onClickHandler = this.onClickHandler.bind(this)</span><br><span class="line">  &#125;</span><br><span class="line">  //createRef:创建元素的引用对象</span><br><span class="line">  inputRef = createRef();</span><br><span class="line">  //按钮点击事件的事件处理函数</span><br><span class="line">  onClickHandler() &#123;</span><br><span class="line">    //通过文本框的元素引用对象获取文本框状态</span><br><span class="line">    console.log(this.inputRef.current.value);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">    	&lt;&gt;</span><br><span class="line">      	&#123;/*为元素引用对象绑定元素*/&#125;</span><br><span class="line">  			&lt;input type=&quot;text&quot; ref=&#123;this.inputRef&#125; /&gt;</span><br><span class="line">				&#123;/*点击按钮时获取文本框控件自身管理的状态*/&#125;</span><br><span class="line">				&lt;button onCLick=&#123;this.onClickHandler&#125;&gt;&lt;/button&gt;</span><br><span class="line">      &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-受控表单组件"><a href="#5-受控表单组件" class="headerlink" title="5.受控表单组件"></a>5.受控表单组件</h2><blockquote>
<p>目标:掌握受控组件的使用方式,理解受控组件的执行过程</p>
</blockquote>
<h3 id="1-受控表单组件的使用方式"><a href="#1-受控表单组件的使用方式" class="headerlink" title="1.受控表单组件的使用方式"></a>1.受控表单组件的使用方式</h3><p><strong>受控表单组件是指表单的状态由组件状态管理,就是将表单的状态和组件状态进行映射。</strong></p>
<p><strong>通过表单控件的 value 属性绑定组件状态,通过 onChange 事件调用 setState 更新组件状态</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class App extends Component &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    text：&quot;默认值&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  onChangeHandler(event) &#123;</span><br><span class="line">    //调用setState方法更新组件状态</span><br><span class="line">    //将组件状态的值更新为用户在文本框输入的内容</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      text:event.target.value</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">    	&lt;input type=&quot;text&quot;</span><br><span class="line">        &#123;/* 将组件状态和文本框的 value 属性进行绑定 */&#125;</span><br><span class="line">        value=&#123;this.state.text&#125;</span><br><span class="line">        &#123;/* 为文本框绑定 change 事件, 当用户在文本框中输入时更新组件状态 */&#125;</span><br><span class="line">        onChange=&#123;this.onChangeHandler&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在只为表单控件添加 value 属性而没添加 onChange 事件的情况下,浏览器的控制会报错警告</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; value=&#123;this.state.text&#125; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;input type=&quot;text&quot; defaultValue=&#123;this.state.text&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://s3.uuu.ovh/imgs/2022/12/01/5b8316bb1f0636dc.png"></p>
<p>你为表单控件供了 value 属性但是没有提供 onChange 事件的事件处理函数，这将渲染一个只读的表单控件。如果你只是想为文本框设置一个默认值，你应该使用 defaultValue，否则，你要么添加 onChange 事件的事件处理函数要么添加 readOnly 属性。</p>
<ul>
<li><p>添加只读属性是为了告诉 react 你就是要渲染一个只读的表单控件。警告消失。</p>
</li>
<li><p>添加 onChange 事件处理函数是为了完成组件状态与表单控件的映射功能。警告消失。</p>
</li>
<li><p>在使用非受控表单的情况下如果要为表单控制设置默认值可以使用 defaultValue 属性。警告消失。</p>
</li>
<li><p>总结：在受控组件中，表单控件身上必须同时具有 value 属性和 onChange 事件。</p>
</li>
</ul>
<hr>
<h3 id="2-受控表单组件执行过程"><a href="#2-受控表单组件执行过程" class="headerlink" title="2.受控表单组件执行过程"></a>2.受控表单组件执行过程</h3><p>(1) 用户触发表单控件的 onChange 事件，执行 onChange 事件的事件处理函数</p>
<p>(2) 在事件处理函数中通过事件对象获取到表单控件的最新状态并使用最新状态更新组件状态</p>
<p>(3) 组件状态更新完成后 render 方法重新执行，在 render 方法中通过最新的组件状态渲染视图</p>
<hr>
<h3 id="3-onChange-事件说明"><a href="#3-onChange-事件说明" class="headerlink" title="3.onChange 事件说明"></a>3.onChange 事件说明</h3><p>在 React 中使用的 onChange 事件并不是原生 JS 中的 onChange 事件，原生 JS 中的 onChange 事件是在表单离开焦点后触发的，而 React 中的 onChange 事件是实时触发的。</p>
<p>在原生 JS 中，表单控件的实时改变事件是 input，但并不是所有的表单控件都有该事件，比如 select。所以 React 为了方便开发者实现受控组件，重新封装了 onChange 事件，让 onChange 事件变成实时触发事件且其他表单控件也可以使用 onChange 事件。</p>
<hr>
<h2 id="6-综合案例-评论"><a href="#6-综合案例-评论" class="headerlink" title="6.综合案例-评论"></a>6.综合案例-评论</h2><h3 id="1-准备案例的布局与样式"><a href="#1-准备案例的布局与样式" class="headerlink" title="1.准备案例的布局与样式"></a>1.准备案例的布局与样式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- public/index.html --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 收藏按钮字体图标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://at.alicdn.com/t/font_2998849_vtlo0vj7ryi.css&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">// src/Comment.js</span><br><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import &quot;./comment.css&quot;;</span><br><span class="line"></span><br><span class="line">class Comment extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&quot;comments&quot;&gt;</span><br><span class="line">        &lt;h3 className=&quot;comm-head&quot;&gt;评论&lt;/h3&gt;</span><br><span class="line">        &lt;div className=&quot;comm-input&quot;&gt;</span><br><span class="line">          &lt;textarea placeholder=&quot;爱发评论的人，运气都很棒&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">          &lt;div className=&quot;foot&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;word&quot;&gt;0/100&lt;/div&gt;</span><br><span class="line">            &lt;div className=&quot;btn&quot;&gt;发表评论&lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;h3 className=&quot;comm-head&quot;&gt;</span><br><span class="line">          热门评论&lt;sub&gt;(5)&lt;/sub&gt;</span><br><span class="line">          &lt;span className=&quot;active&quot;&gt;默认&lt;/span&gt;</span><br><span class="line">      		&lt;span&gt;时间&lt;/span&gt;</span><br><span class="line">        &lt;/h3&gt;</span><br><span class="line">        &lt;ul className=&quot;comm-list&quot;&gt;</span><br><span class="line">          &lt;li className=&quot;comm-item&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;avatar&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div className=&quot;info&quot;&gt;</span><br><span class="line">              &lt;p className=&quot;name vip&quot;&gt;</span><br><span class="line">                清风徐来</span><br><span class="line">                &lt;img</span><br><span class="line">                  alt=&quot;&quot;</span><br><span class="line">                  src=&quot;https://gw.alicdn.com/tfs/TB1c5JFbGSs3KVjSZPiXXcsiVXa-48-48.png&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">              &lt;p className=&quot;time&quot;&gt;</span><br><span class="line">                2012-12-12</span><br><span class="line">                &#123;/* 未收藏: icon-collect 已收藏: icon-collect-sel */&#125;</span><br><span class="line">                &lt;span className=&quot;iconfont icon-collect&quot;&gt;&lt;/span&gt;</span><br><span class="line">                &lt;span className=&quot;del&quot;&gt;删除&lt;/span&gt;</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">              &lt;p&gt;</span><br><span class="line">                这里是评论的内容！！！这里是评论的内容！！！这里是评论的内容！！！</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Comment;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* src/comment.css */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comments</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#121212</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">70px</span> auto <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-head</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-head</span> sub &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0.2em</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.comm-head</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-head</span> <span class="selector-tag">span</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.comm-head</span> <span class="selector-tag">span</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#61f6ff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.comm-list</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> <span class="selector-tag">p</span><span class="selector-class">.name</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> <span class="selector-tag">p</span><span class="selector-class">.vip</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ebba73</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> <span class="selector-tag">p</span><span class="selector-class">.vip</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> <span class="selector-tag">p</span><span class="selector-class">.time</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> <span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> <span class="selector-class">.iconfont</span><span class="selector-class">.icon-collect-sel</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff008c</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> <span class="selector-class">.del</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-item</span> <span class="selector-class">.info</span> <span class="selector-class">.del</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.comm-input</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#25252b</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-input</span> <span class="selector-tag">textarea</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">resize</span>: none;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: inherit;</span><br><span class="line">  <span class="attribute">height</span>: auto;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-input</span> <span class="selector-class">.foot</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-end;</span><br><span class="line">  justify-items: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-input</span> <span class="selector-class">.foot</span> <span class="selector-class">.word</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comm-input</span> <span class="selector-class">.foot</span> <span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ff008c</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  user-select: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// src/index.js</span><br><span class="line">import ReactDOM from &quot;react-dom/client&quot;;</span><br><span class="line">import Comment from &quot;./Comment&quot;;</span><br><span class="line"></span><br><span class="line">let root = ReactDOM.createRoot(document.getElementById(&quot;root&quot;));</span><br><span class="line">root.render(&lt;Comment /&gt;);</span><br></pre></td></tr></table></figure>

<h3 id="2-渲染评论列表"><a href="#2-渲染评论列表" class="headerlink" title="2.渲染评论列表"></a>2.渲染评论列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">// src/Comment.js</span><br><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import &quot;./comment.css&quot;;</span><br><span class="line">import dateformat from &quot;dateformat&quot;;</span><br><span class="line">import classNames from &quot;classnames&quot;;</span><br><span class="line"></span><br><span class="line">export default class Comment extends React.Component &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    //当前用户</span><br><span class="line">    // 当前用户</span><br><span class="line">    user: &#123;</span><br><span class="line">      name: &quot;清风徐来&quot;,</span><br><span class="line">      vip: true,</span><br><span class="line">      avatar: &quot;https://static.youku.com/lvip/img/avatar/310/6.png&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    // 评论列表</span><br><span class="line">    comments: [</span><br><span class="line">      &#123;</span><br><span class="line">        id: 100,</span><br><span class="line">        name: &quot;__RichMan&quot;,</span><br><span class="line">        avatar: &quot;https://r1.ykimg.com/051000005BB36AF28B6EE4050F0E3BA6&quot;,</span><br><span class="line">        content:</span><br><span class="line">          &quot;这阵容我喜欢😍靳东&amp;闫妮，就这俩名字，我就知道是良心剧集...锁了🔒&quot;,</span><br><span class="line">        time: new Date(&quot;2022-10-12T10:10:23&quot;),</span><br><span class="line">        vip: true,</span><br><span class="line">        collect: false,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: 101,</span><br><span class="line">        name: &quot;糖蜜甜筒颖&quot;,</span><br><span class="line">        avatar:</span><br><span class="line">          &quot;https://image.9xsecndns.cn/image/uicon/712b2bbec5b58d6066aff202c9402abc3370674052733b.jpg&quot;,</span><br><span class="line">        content:</span><br><span class="line">          &quot;突围神仙阵容 人民的名义第三部来了 靳东陈晓闫妮秦岚等众多优秀演员实力派 守护人民的财产 再现国家企业发展历程&quot;,</span><br><span class="line">        time: new Date(&quot;2022-09-23T15:12:44&quot;),</span><br><span class="line">        vip: false,</span><br><span class="line">        collect: true,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: 102,</span><br><span class="line">        name: &quot;清风徐来&quot;,</span><br><span class="line">        avatar: &quot;https://static.youku.com/lvip/img/avatar/310/6.png&quot;,</span><br><span class="line">        content:</span><br><span class="line">          &quot;第一集看的有点费力，投入不了，闫妮不太适合啊，职场的人哪有那么多表情，一点职场的感觉都没有&quot;,</span><br><span class="line">        time: new Date(&quot;2022-07-01T00:30:51&quot;),</span><br><span class="line">        vip: true,</span><br><span class="line">        collect: false,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&quot;comments&quot;&gt;</span><br><span class="line">        &lt;h3 className=&quot;comm-head&quot;&gt;评论&lt;/h3&gt;</span><br><span class="line">        &lt;div className=&quot;comm-input&quot;&gt;</span><br><span class="line">          &lt;textarea placeholder=&quot;爱发评论的人，运气都很棒&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">          &lt;div className=&quot;foot&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;word&quot;&gt;0/100&lt;/div&gt;</span><br><span class="line">            &lt;div className=&quot;btn&quot;&gt;发表评论&lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;h3 className=&quot;comm-head&quot;&gt;</span><br><span class="line">          热门评论&lt;sub&gt;(&#123;this.state.comments.length&#125;)&lt;/sub&gt;</span><br><span class="line">          &lt;span className=&quot;active&quot;&gt;默认&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;时间&lt;/span&gt;</span><br><span class="line">        &lt;/h3&gt;</span><br><span class="line">        &lt;ul className=&quot;comm-list&quot;&gt;</span><br><span class="line">          &#123;this.state.comments.map((item, index) =&gt; (</span><br><span class="line">            &lt;li className=&quot;comm-item&quot;&gt;</span><br><span class="line">              &lt;div</span><br><span class="line">                className=&quot;avatar&quot;</span><br><span class="line">                style=&#123;&#123; backgroundImage: `url($&#123;item.avatar&#125;)` &#125;&#125;</span><br><span class="line">              &gt;&lt;/div&gt;</span><br><span class="line">              &lt;div className=&quot;info&quot;&gt;</span><br><span class="line">                &lt;p className=&quot;name vip&quot;&gt;</span><br><span class="line">                  &#123;item.name&#125;</span><br><span class="line">                  &#123;item.vip ? (</span><br><span class="line">                    &lt;img</span><br><span class="line">                      alt=&quot;&quot;</span><br><span class="line">                      src=&quot;https://gw.alicdn.com/tfs/TB1c5JFbGSs3KVjSZPiXXcsiVXa-48-48.png&quot;</span><br><span class="line">                    /&gt;</span><br><span class="line">                  ) : null&#125;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p className=&quot;time&quot;&gt;</span><br><span class="line">                  &#123;dateformat(item.time, &quot;yyyy-mm-dd&quot;)&#125;</span><br><span class="line">                  &#123;/* 未收藏: icon-collect 已收藏: icon-collect-sel */&#125;</span><br><span class="line">                  &lt;span</span><br><span class="line">                    className=&#123;classNames([</span><br><span class="line">                      &quot;iconfont&quot;,</span><br><span class="line">                      &#123;</span><br><span class="line">                        &quot;icon-collect-sel&quot;: item.collect,</span><br><span class="line">                        &quot;icon-collect&quot;: !item.collect,</span><br><span class="line">                      &#125;,</span><br><span class="line">                    ])&#125;</span><br><span class="line">                  &gt;&lt;/span&gt;</span><br><span class="line">                  &#123;item.name === this.state.user.name ? (</span><br><span class="line">                    &lt;span className=&quot;del&quot;&gt;删除&lt;/span&gt;</span><br><span class="line">                  ) : null&#125;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;&#123;item.content&#125;&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-发表评论"><a href="#3-发表评论" class="headerlink" title="3. 发表评论"></a>3. 发表评论</h3><blockquote>
<p>目标：完成发表评论功能，对用户输入的评论内容字数进行限制。</p>
</blockquote>
<p>(1) 将文本域组件更改为受控组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// src/Comment.js</span><br><span class="line">class Comment extends Component &#123;</span><br><span class="line">  // 构造函数</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super();</span><br><span class="line">    // 更改事件处理函数的 this 指向</span><br><span class="line">    this.updateContent = this.updateContent.bind(this);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 组件状态</span><br><span class="line">  state = &#123;</span><br><span class="line">    // 用户输入的评论内容</span><br><span class="line">    content: &quot;&quot;,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  // 同步用户在文本域中输入的状态</span><br><span class="line">  updateContent(event) &#123;</span><br><span class="line">    this.setState(&#123; content: event.target.value&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    // 将 value 属性和组件状态 content 进行绑定</span><br><span class="line">    // 添加 onChange 事件用于更新组件状态</span><br><span class="line">    return &lt;textarea value=&#123;this.state.content&#125; onChange=&#123;this.updateContent&#125;&gt;&lt;/textarea&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2) 展示用户输入的内容的数量并对数量进行限制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// src/Comment.js</span><br><span class="line">class Comment extends Component &#123;</span><br><span class="line">  // 同步用户在文本域中输入的状态</span><br><span class="line">  updateContent(event) &#123;</span><br><span class="line">    // 获取用户在文本域中输入的内容</span><br><span class="line">    const value = event.target.value;</span><br><span class="line">    // 如果内容长度大于100, 阻止程序继承执行</span><br><span class="line">    if (value.length &gt; 100) return;</span><br><span class="line">    // 内容符合长度要求, 设置组件状态</span><br><span class="line">    this.setState(&#123; content: value &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div className=&quot;word&quot;&gt;&#123;this.state.content.length&#125;/100&lt;/div&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(3) 实现发表评论、清空文本域</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component &#125; from &quot;react&quot;;</span><br><span class="line">import dateFormat from &quot;dateformat&quot;;</span><br><span class="line">import &quot;./comment.css&quot;;</span><br><span class="line"></span><br><span class="line">class Comment extends Component &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    // 将事件处理函数中的 this 指向组件实例</span><br><span class="line">    this.publishComment = this.publishComment.bind(this);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 发表评论</span><br><span class="line">  publishComment() &#123;</span><br><span class="line">    // 如果用户没有输入评论内容, 阻止程序继续执行</span><br><span class="line">    if (this.state.content.length === 0) return;</span><br><span class="line">    // 更新组件状态</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      // 更新评论列表</span><br><span class="line">      comments: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: Math.random(),</span><br><span class="line">          content: this.state.content,</span><br><span class="line">          ...this.state.user,</span><br><span class="line">          collect: false,</span><br><span class="line">          time: new Date().toDateString(),</span><br><span class="line">        &#125;,</span><br><span class="line">        ...this.state.comments,</span><br><span class="line">      ],</span><br><span class="line">      // 更新用户在文本域中输入的内容</span><br><span class="line">      content: &quot;&quot;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div onClick=&#123;this.publishComment&#125;&gt;发表评论&lt;/div&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-删除评论"><a href="#4-删除评论" class="headerlink" title="4. 删除评论"></a>4. 删除评论</h3><blockquote>
<p>目标：实现删除评论功能</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Comment extends Component &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">		// 将事件处理函数中的 this 指向组件实例</span><br><span class="line">    this.deleteComment = this.deleteComment.bind(this);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 删除评论</span><br><span class="line">  deleteComment(id) &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      comments: this.state.comments.filter((item) =&gt; item.id !== id),</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;span onClick=&#123;() =&gt; this.deleteComment(item.id)&#125;&gt;删除&lt;/span&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-收藏评论"><a href="#5-收藏评论" class="headerlink" title="5. 收藏评论"></a>5. 收藏评论</h3><blockquote>
<p>目标：实现收藏评论功能</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component &#125; from &quot;react&quot;;</span><br><span class="line">import dateFormat from &quot;dateformat&quot;;</span><br><span class="line">import &quot;./comment.css&quot;;</span><br><span class="line"></span><br><span class="line">class Comment extends Component &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">		// 将事件处理函数中的 this 指向组件实例</span><br><span class="line">    this.collectComment = this.collectComment.bind(this);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 收藏评论</span><br><span class="line">  collectComment(id) &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      comments: this.state.comments.map((item) =&gt;</span><br><span class="line">        item.id === id ? &#123; ...item, collect: !item.collect &#125; : item</span><br><span class="line">      ),</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;span onClick=&#123;() =&gt; this.collectComment(item.id)&#125;&gt;&lt;/span&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-评论排序"><a href="#6-评论排序" class="headerlink" title="6. 评论排序"></a>6. 评论排序</h3><blockquote>
<p>目标：实现评论列表排序功能</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i lodash</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import orderBy from &quot;lodash/orderBy&quot;;</span><br><span class="line"></span><br><span class="line">class Comment extends React.Component &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    // 排序: 按照 id 和 time 进行排序</span><br><span class="line">    sortField: &quot;id&quot;,</span><br><span class="line">  &#125;;</span><br><span class="line">	render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          className=&#123;classNames(&#123; active: this.state.sortField === &quot;id&quot; &#125;)&#125;</span><br><span class="line">          onClick=&#123;() =&gt;</span><br><span class="line">            this.setState(&#123;</span><br><span class="line">              sortField: &quot;id&quot;,</span><br><span class="line">              comments: orderBy(this.state.comments, [&quot;id&quot;], [&quot;asc&quot;]),</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &gt;</span><br><span class="line">          默认</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          className=&#123;classNames(&#123; active: this.state.sortField === &quot;time&quot; &#125;)&#125;</span><br><span class="line">          onClick=&#123;() =&gt;</span><br><span class="line">            this.setState(&#123;</span><br><span class="line">              sortField: &quot;time&quot;,</span><br><span class="line">              comments: orderBy(this.state.comments, [&quot;time&quot;], [&quot;asc&quot;]),</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &gt;</span><br><span class="line">          时间</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://xxxxxx.com">TimYang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://xxxxxx.com">https://xxxxxx.com</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">此文章版權歸TimYang所有，如有轉載，請註明來自原作者</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://www.inovex.de/wp-content/uploads/2022/01/one-year-of-react-native-1500x880.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://s3.uuu.ovh/imgs/2022/12/04/1f461ef856c95522.png" target="_blank"><img class="post-qr-code-img" src="https://s3.uuu.ovh/imgs/2022/12/04/1f461ef856c95522.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://s3.uuu.ovh/imgs/2022/12/04/2ba95f901d7524ea.png" target="_blank"><img class="post-qr-code-img" src="https://s3.uuu.ovh/imgs/2022/12/04/2ba95f901d7524ea.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2022/11/30/hello-world/"><img class="next-cover" src="https://i.loli.net/2019/12/25/oj1wAnGSKtFvXIJ.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Hello World</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s3.uuu.ovh/imgs/2022/12/04/3dd3d15435d83cc3.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Tim Yang</div><div class="author-info__description">这个博客会存储我从前到将来的知识</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/YangTimFeng" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1971565198@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="http://localhost:4000/" target="_blank" title="blog"><i class="fa-sharp fa-solid fa-blog"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React-%E5%9F%BA%E7%A1%80-%E7%BB%84%E4%BB%B6-%E7%B1%BB%E7%BB%84%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">React 基础-组件-类组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.组件概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-what-is-%E7%BB%84%E4%BB%B6%E5%95%8A%EF%BC%9F"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.what is 组件啊？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.组件设计思想</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6"><span class="toc-number">1.2.</span> <span class="toc-text">2.创建组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E5%8D%95%E7%8B%AC%E5%AD%98%E6%94%BE"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.组件单独存放</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%BB%84%E4%BB%B6%E7%8A%B6%E6%80%81"><span class="toc-number">1.3.</span> <span class="toc-text">3.组件状态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E7%8A%B6%E6%80%81%E4%BB%80%E4%B9%88%E7%8E%A9%E6%84%8F%EF%BC%9F"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.组件状态什么玩意？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%93%8D%E4%BD%9C%E7%BB%84%E4%BB%B6%E7%8A%B6%E6%80%81"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.操作组件状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9B%B4%E6%94%B9%E4%BA%8B%E4%BB%B6%E5%87%BD%E6%95%B0-this-%E6%8C%87%E5%90%91"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.更改事件函数 this 指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%8A%B6%E6%80%81%E4%B8%8D%E5%8F%AF%E5%8F%98"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.状态不可变</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%9D%9E%E5%8F%97%E6%8E%A7%E8%A1%A8%E5%8D%95%E7%BB%84%E4%BB%B6"><span class="toc-number">1.4.</span> <span class="toc-text">4.非受控表单组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%8F%97%E6%8E%A7%E8%A1%A8%E5%8D%95%E7%BB%84%E4%BB%B6"><span class="toc-number">1.5.</span> <span class="toc-text">5.受控表单组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8F%97%E6%8E%A7%E8%A1%A8%E5%8D%95%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.受控表单组件的使用方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%97%E6%8E%A7%E8%A1%A8%E5%8D%95%E7%BB%84%E4%BB%B6%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">1.5.2.</span> <span class="toc-text">2.受控表单组件执行过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-onChange-%E4%BA%8B%E4%BB%B6%E8%AF%B4%E6%98%8E"><span class="toc-number">1.5.3.</span> <span class="toc-text">3.onChange 事件说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B-%E8%AF%84%E8%AE%BA"><span class="toc-number">1.6.</span> <span class="toc-text">6.综合案例-评论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E6%A1%88%E4%BE%8B%E7%9A%84%E5%B8%83%E5%B1%80%E4%B8%8E%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.6.1.</span> <span class="toc-text">1.准备案例的布局与样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B8%B2%E6%9F%93%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8"><span class="toc-number">1.6.2.</span> <span class="toc-text">2.渲染评论列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%91%E8%A1%A8%E8%AF%84%E8%AE%BA"><span class="toc-number">1.6.3.</span> <span class="toc-text">3. 发表评论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E8%AF%84%E8%AE%BA"><span class="toc-number">1.6.4.</span> <span class="toc-text">4. 删除评论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%94%B6%E8%97%8F%E8%AF%84%E8%AE%BA"><span class="toc-number">1.6.5.</span> <span class="toc-text">5. 收藏评论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%AF%84%E8%AE%BA%E6%8E%92%E5%BA%8F"><span class="toc-number">1.6.6.</span> <span class="toc-text">6. 评论排序</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/12/04/%E4%BB%A3%E7%A0%81%E5%9D%97%E6%BC%94%E7%A4%BA/%E6%BC%94%E7%A4%BA/" title="React类组件"><img src="https://www.inovex.de/wp-content/uploads/2022/01/one-year-of-react-native-1500x880.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="React类组件"/></a><div class="content"><a class="title" href="/2022/12/04/%E4%BB%A3%E7%A0%81%E5%9D%97%E6%BC%94%E7%A4%BA/%E6%BC%94%E7%A4%BA/" title="React类组件">React类组件</a><time datetime="2022-12-03T19:27:00.000Z" title="发表于 2022-12-04 03:27:00">2022-12-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/30/hello-world/" title="Hello World"><img src="https://i.loli.net/2019/12/25/oj1wAnGSKtFvXIJ.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2022/11/30/hello-world/" title="Hello World">Hello World</a><time datetime="2022-11-30T15:57:14.956Z" title="发表于 2022-11-30 23:57:14">2022-11-30</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Tim Yang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>